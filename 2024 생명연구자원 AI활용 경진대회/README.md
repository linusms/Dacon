# 암환자 유전체 데이터 기반 암종 분류 AI 모델 개발

'2024 생명연구자원 AI활용 경진대회'는 바이오 데이터를 기반으로 한 AI 기술의 문제 해결 능력을 탐구하는 것을 목표로 합니다.
이 대회는 바이오 분야에서 AI 활용의 저변을 확대하고, 복잡한 바이오 데이터를 효율적으로 분석 및 해석할 수 있는 AI 알고리즘 개발에 초점을 맞추고 있습니다.

본 대회의 구체적인 과제는 암환자 유전체 데이터의 변이 정보를 활용하여 암종을 분류하는 AI 모델을 개발하는 것입니다.
참가자들은 제공된 학습 데이터셋(암환자 유전체 변이 정보)을 사용하여 특정 변이 정보를 바탕으로 암종을 정확하게 분류할 수 있는 AI 알고리즘을 개발해야 합니다.

이 대회의 궁극적인 목적은 바이오 데이터의 활용도를 높이고, 바이오 분야에서 AI 기술의 적용 가능성을 극대화하며, 인공지능 기술이 실제 바이오 의료 문제 해결에 어떻게 기여할 수 있는지 탐구하는 것입니다.


# 대회 전략

## EDA

총 암 발병 데이터 6200개

train unique count:  118873
test unique count:  124942

unique train transformation count:  154844
unique test transformation count:  238604

각 변이 코드를 하나하나 분리해서 셀 시 고유값이 더 증가하는 것으로 보아
한 암 발병 데이터 레코드에서, 특정 단백질의 변이가 한 개 이상인 경우가 대다수임을 의미

## 이상치 처리

![image](https://github.com/user-attachments/assets/44098971-6bde-49ec-87e4-9169331e038a)

train data, test data 대부분 단백질 당 10회 미만의 변형 존재

max train transformation count:  64
max test transformation count:  51

test data에는 특정 단백질에 측정하지 못한 변형이 존재함(즉, 해당 단백질에서 변형이 일어났는지 알 수 없는 경우)

단백질당 null 값이 관측된 횟수는 다음과 같음
 
'AK2': 29,
 'TNFAIP6': 65,
 'CNOT2': 77,
 'RBM5': 19,
 'PTGES3': 3,
 'MYL1': 21,
 'TMEM97': 4,
 'PTCH1': 1,
 'IER3': 1,
 'TARS1': 1,
 'CFP': 1,
 'CCRL2': 2,
 'INHBB': 1,
 'SCAMP1': 1,
 'NDUFV1': 1,
 'KCNH1': 1,
 'SLC25A28': 1,
 'POLD2': 1,
 'CRAT': 1,
 'SCNN1A': 1,
 'SYBU': 1,
 'ATP6V1H': 1,
 'DPYSL4': 1,
 'NUDT4': 1,
 'GUK1': 1

## 인코딩

1. 단백질마다 발현 가능한 변이 종류 개수가 다름
2. 한 암 발병 데이터 레코드에서, 특정 단백질의 변이가 한 개 이상인 경우가 대다수 (최대 64개)
3. 특정 단백질의 경우, 학습 데이터에서 관측되지 않은 변이가 테스트 데이터에서 관측되지 않을수도 있음

### 따라서 일반적인 원핫 인코딩은 불가능. 
  + 단순히 각 단백질 개수 * 학습 데이터에서만 관측된 각 단백질에서의 변이 개수 해도 족히 16만개 정도
  + 차원수를 줄인다 해도, 학습 데이터에서 관측되지 않은 변이가 생길 경우, 열 개수 자체가 달라져버림
  + 한 레코드에서  특정 단백질의 변이가 다수 발생할 경우 (64개 등), 원핫 인코딩 시 열 개수 최소 2~30배 증가

### 인코딩-아이디어

{'Y222*': {'prefix': 'Y', 'number': '222', 'suffix': '*'},

 'R1257K': {'prefix': 'R', 'number': '1257', 'suffix': 'K'},
 
 'Y632D': {'prefix': 'Y', 'number': '632', 'suffix': 'D'},
 
 'C94C': {'prefix': 'C', 'number': '94', 'suffix': 'C'},
 
 'G1218*': {'prefix': 'G', 'number': '1218', 'suffix': '*'},
 
 'MLV74fs': {'prefix': 'MLV', 'number': '74', 'suffix': 'fs'},
 
 'V122F': {'prefix': 'V', 'number': '122', 'suffix': 'F'},
 
 'C1116G': {'prefix': 'C', 'number': '1116', 'suffix': 'G'},
 
 'L883P': {'prefix': 'L', 'number': '883', 'suffix': 'P'},
 
 'T239M': {'prefix': 'T', 'number': '239', 'suffix': 'M'},
 
 'V1804I': {'prefix': 'V', 'number': '1804', 'suffix': 'I'},

**1. 새로운 변이가 튀어나올 수 있는 test data에도 범용성 있게 적용 가능한 인코딩 방법**

**2. 한 단백질에서 동시에 여러 개의 변이가 생긴 경우, 각 변이들이 서로 미치는 영향을 고려할 수 있도록
   동시에 생긴 여러 변이를 모두 반영할 수 있는 인코딩 방법**
   
**3. 차원 수가 너무 크지 않게 하는 인코딩 방법**

각 단백질을 하나의 데이터프레임으로 고려

해당 단백질의 총 길이를 파악 후, 각 위치를 열로 둠

최종적으로 단백질의 데이터프레임은 행 - 암 발병 데이터 ID, 열 - 단백질 위치 (1부터 최대 n까지) 로 구성

1. 이상이 생긴 위치만 1로 두는 원핫 인코딩
   (어차피 어디가 망가졌는지가 중요하지, 어떻게 바뀌었는지는 암 발병에 큰 영향을 주지 않는다는 가정 하)
   
2. 이상이 생긴 위치에 표시를 하되, 무슨 아미노산으로 바뀌었는지 기록하는 인코딩 방법 (구상중)

만들어진 데이터프레임을 AutoEncoder 로 차원 축소, 이후 잠재 벡터를 학습 데이터로 사용할 예정

단백질 별 차원 축소한 잠재 벡터를 이어 붙여 암 발병 데이터 ID 별 하나의 레코드 형성

이렇게 만들어진 데이터로 딥러닝 모델에 넣든, 머신러닝 모델에 넣든 하여 학습

-필요한 데이터 : 각 단백질 별 길이 (즉, n의 값)


## 좋은 학습 데이터 생성 

미정

## 특성 공학

인코딩만 잘하면 필요 없을듯. 이후 추가되는 데이터 확인 후 결정

## 좋은 분류 모델

CATBOOST, LGBM, XGBOOST 고려 중
딥러닝 모델도 고려 가능 (기본적인 DNN, 혹은 GNN?)

## 유전체 데이터 도메인 지식

각 열의 이름은 단백질 이름임

유전체 가족 (genetic families) 라 하여, 비슷한 단백질군이 존재

변형을 나타내는 코드는 크게 3종류가 있음

알파벳+숫자+알파벳 : 앞,뒤 알파벳은 아미노산을 뜻함. 숫자는 아미노산이 바뀌는 위치

숫자_숫자+알파벳>알파벳 : 앞의 두 숫자는 각각 바뀌는 위치는 뜻함. 알파벳은 아미노산 의미

-숫자+fs : -숫자는 뒤에서부터 센 위치를 뜻함. fs는 frameshift mutation을 뜻함

* : 종결 코돈을 뜻함. 즉 변경되어 삽입된 종결 코돈이 정상적인 경우보다 일찍 삽입됨을 의미


# 학습 파이프라인


